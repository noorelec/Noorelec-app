<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Auth</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            background: #f5f5f5;
        }
        .test-box {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            margin: 0 auto;
        }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        button {
            padding: 10px 20px;
            margin: 10px 5px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background: #667eea;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="test-box">
        <h1>üîç TEST NOORELEC AUTH</h1>
        
        <h3>√âtape 1 : Supabase charg√© ?</h3>
        <p id="test1"></p>
        
        <h3>√âtape 2 : Variable supabase existe ?</h3>
        <p id="test2"></p>
        
        <h3>√âtape 3 : Fonction switchTab existe ?</h3>
        <p id="test3"></p>
        
        <h3>√âtape 4 : Test switchTab</h3>
        <button onclick="testSwitch()">Tester switchTab</button>
        <p id="test4"></p>
        
        <hr>
        <h3>Console Errors:</h3>
        <div id="errors" style="background: #fee; padding: 15px; border-radius: 5px; font-family: monospace; font-size: 12px;"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="auth.js?v=4"></script>
    <script>
        // Capturer les erreurs
        window.onerror = function(msg, url, line, col, error) {
            document.getElementById('errors').innerHTML += `‚ùå ${msg}<br>Line: ${line}<br><br>`;
            return false;
        };
        
        window.addEventListener('DOMContentLoaded', function() {
            // Test 1
            if (typeof window.supabase !== 'undefined') {
                document.getElementById('test1').innerHTML = '<span class="success">‚úÖ Supabase SDK charg√©</span>';
            } else {
                document.getElementById('test1').innerHTML = '<span class="error">‚ùå Supabase SDK non charg√©</span>';
            }
            
            // Test 2
            if (typeof supabase !== 'undefined') {
                document.getElementById('test2').innerHTML = '<span class="success">‚úÖ Variable supabase existe</span>';
            } else {
                document.getElementById('test2').innerHTML = '<span class="error">‚ùå Variable supabase n\'existe pas</span>';
            }
            
            // Test 3
            if (typeof switchTab !== 'undefined') {
                document.getElementById('test3').innerHTML = '<span class="success">‚úÖ Fonction switchTab existe</span>';
            } else {
                document.getElementById('test3').innerHTML = '<span class="error">‚ùå Fonction switchTab n\'existe pas</span>';
            }
        });
        
        function testSwitch() {
            try {
                switchTab('login');
                document.getElementById('test4').innerHTML = '<span class="success">‚úÖ switchTab fonctionne !</span>';
            } catch(e) {
                document.getElementById('test4').innerHTML = `<span class="error">‚ùå Erreur: ${e.message}</span>`;
            }
        }
    </script>
</body>
</html>
